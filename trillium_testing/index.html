<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="testing utilities for trillium applications."><meta name="keywords" content="rust, rustlang, rust-lang, trillium_testing"><title>trillium_testing - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../trillium_testing/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate trillium_testing</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.3.1</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all trillium_testing's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li></ul></div><div id="sidebar-vars" data-name="trillium_testing" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">trillium_testing</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/trillium_testing/lib.rs.html#1-114" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>testing utilities for trillium applications.</p>
<p>this crate is intended to be used as a development dependency.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">trillium_testing::prelude</span>::<span class="kw-2">*</span>;
<span class="kw">use</span> <span class="ident">trillium</span>::{<span class="ident">Conn</span>, <span class="ident">conn_try</span>};
<span class="kw">async</span> <span class="kw">fn</span> <span class="ident">handler</span>(<span class="kw-2">mut</span> <span class="ident">conn</span>: <span class="ident">Conn</span>) <span class="op">-</span><span class="op">&gt;</span> <span class="ident">Conn</span> {
    <span class="kw">let</span> <span class="ident">request_body</span> <span class="op">=</span> <span class="macro">conn_try!</span>(<span class="ident">conn</span>.<span class="ident">request_body_string</span>().<span class="kw">await</span>, <span class="ident">conn</span>);
    <span class="ident">conn</span>.<span class="ident">with_body</span>(<span class="macro">format!</span>(<span class="string">&quot;request body was: {}&quot;</span>, <span class="ident">request_body</span>))
        .<span class="ident">with_status</span>(<span class="number">418</span>)
        .<span class="ident">with_header</span>(<span class="string">&quot;request-id&quot;</span>, <span class="string">&quot;special-request&quot;</span>)
}

<span class="macro">assert_response!</span>(
    <span class="ident">post</span>(<span class="string">&quot;/&quot;</span>).<span class="ident">with_request_body</span>(<span class="string">&quot;hello trillium!&quot;</span>).<span class="ident">on</span>(<span class="kw-2">&amp;</span><span class="ident">handler</span>),
    <span class="ident">Status::ImATeapot</span>,
    <span class="string">&quot;request body was: hello trillium!&quot;</span>,
    <span class="string">&quot;request-id&quot;</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;special-request&quot;</span>,
    <span class="string">&quot;content-length&quot;</span> <span class="op">=</span><span class="op">&gt;</span> <span class="string">&quot;33&quot;</span>
);
</code></pre></div>
<h2 id="features" class="section-header"><a href="#features">Features</a></h2>
<p><strong>You must enable a runtime feature for trillium testing</strong></p>
<h3 id="tokio" class="section-header"><a href="#tokio">Tokio:</a></h3><div class="example-wrap"><pre class="language-toml"><code>[dev-dependencies]
trillium-testing = { version = &quot;0.2&quot;, , features = [&quot;tokio&quot;] }</code></pre></div><h3 id="async-std" class="section-header"><a href="#async-std">Async-std:</a></h3><div class="example-wrap"><pre class="language-toml"><code>[dev-dependencies]
trillium-testing = { version = &quot;0.2&quot;, , features = [&quot;async-std&quot;] }</code></pre></div><h3 id="smol" class="section-header"><a href="#smol">Smol:</a></h3><div class="example-wrap"><pre class="language-toml"><code>[dev-dependencies]
trillium-testing = { version = &quot;0.2&quot;, , features = [&quot;smol&quot;] }</code></pre></div></div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-left import-item"><code>pub use futures_lite;</code></div><div class="item-right docblock-short"></div></div><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="mod" href="methods/index.html" title="trillium_testing::methods mod">methods</a></div><div class="item-right docblock-short"><p><a href="struct.TestConn.html"><code>TestConn</code></a> builders for http methods</p>
</div><div class="item-left module-item"><a class="mod" href="prelude/index.html" title="trillium_testing::prelude mod">prelude</a></div><div class="item-right docblock-short"><p>useful stuff for testing trillium apps</p>
</div></div><h2 id="macros" class="section-header"><a href="#macros">Macros</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="macro" href="macro.assert_body.html" title="trillium_testing::assert_body macro">assert_body</a></div><div class="item-right docblock-short"><p>assert that the response body is as specified. this assertion requires mutation of the conn.</p>
</div><div class="item-left module-item"><a class="macro" href="macro.assert_body_contains.html" title="trillium_testing::assert_body_contains macro">assert_body_contains</a></div><div class="item-right docblock-short"><p>asserts that the response body matches the specified pattern, using <a href="https://doc.rust-lang.org/nightly/std/primitive.str.html#method.contains" title="str::contains"><code>str::contains</code></a></p>
</div><div class="item-left module-item"><a class="macro" href="macro.assert_headers.html" title="trillium_testing::assert_headers macro">assert_headers</a></div><div class="item-right docblock-short"><p>asserts any number of response headers</p>
</div><div class="item-left module-item"><a class="macro" href="macro.assert_not_handled.html" title="trillium_testing::assert_not_handled macro">assert_not_handled</a></div><div class="item-right docblock-short"><p>assert that all of the following are true:</p>
</div><div class="item-left module-item"><a class="macro" href="macro.assert_ok.html" title="trillium_testing::assert_ok macro">assert_ok</a></div><div class="item-right docblock-short"><p>assert_ok is like <a href="macro.assert_response.html" title="assert_response!"><code>assert_response!</code></a> except it always asserts a status of 200 Ok.</p>
</div><div class="item-left module-item"><a class="macro" href="macro.assert_response.html" title="trillium_testing::assert_response macro">assert_response</a></div><div class="item-right docblock-short"><p>combines several other assertions. this assertion can be used to assert:</p>
</div><div class="item-left module-item"><a class="macro" href="macro.assert_status.html" title="trillium_testing::assert_status macro">assert_status</a></div><div class="item-right docblock-short"><p>assert that the status code of a conn is as specified.</p>
</div></div><h2 id="structs" class="section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="struct" href="struct.TestConn.html" title="trillium_testing::TestConn struct">TestConn</a></div><div class="item-right docblock-short"><p>A wrapper around a <a href="prelude/struct.Conn.html" title="trillium::Conn"><code>trillium::Conn</code></a> for testing</p>
</div><div class="item-left module-item"><a class="struct" href="struct.TestTransport.html" title="trillium_testing::TestTransport struct">TestTransport</a></div><div class="item-right docblock-short"><p>a readable and writable transport for testing</p>
</div><div class="item-left module-item"><a class="struct" href="struct.Url.html" title="trillium_testing::Url struct">Url</a></div><div class="item-right docblock-short"><p>A parsed URL record.</p>
</div></div><h2 id="enums" class="section-header"><a href="#enums">Enums</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="enum" href="enum.Method.html" title="trillium_testing::Method enum">Method</a></div><div class="item-right docblock-short"><p>HTTP request methods.</p>
</div><div class="item-left module-item"><a class="enum" href="enum.Status.html" title="trillium_testing::Status enum">Status</a></div><div class="item-right docblock-short"><p>HTTP response status codes.</p>
</div></div><h2 id="traits" class="section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="trait" href="trait.AsyncRead.html" title="trillium_testing::AsyncRead trait">AsyncRead</a></div><div class="item-right docblock-short"><p>Read bytes asynchronously.</p>
</div><div class="item-left module-item"><a class="trait" href="trait.AsyncReadExt.html" title="trillium_testing::AsyncReadExt trait">AsyncReadExt</a></div><div class="item-right docblock-short"><p>Extension trait for <a href="trait.AsyncRead.html" title="AsyncRead"><code>AsyncRead</code></a>.</p>
</div><div class="item-left module-item"><a class="trait" href="trait.AsyncWrite.html" title="trillium_testing::AsyncWrite trait">AsyncWrite</a></div><div class="item-right docblock-short"><p>Write bytes asynchronously.</p>
</div></div><h2 id="functions" class="section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-left module-item"><a class="fn" href="fn.block_on.html" title="trillium_testing::block_on fn">block_on</a></div><div class="item-right docblock-short"><p>Runs the global and the local executor on the current thread</p>
</div><div class="item-left module-item"><a class="fn" href="fn.init.html" title="trillium_testing::init fn">init</a></div><div class="item-right docblock-short"><p>initialize a handler</p>
</div><div class="item-left module-item"><a class="fn" href="fn.with_server.html" title="trillium_testing::with_server fn">with_server</a></div><div class="item-right docblock-short"><p>Starts a trillium handler bound to a random available port on
localhost, run the async tests provided as the second
argument, and then shut down the server. useful for full
integration tests that actually exercise the tcp layer.</p>
</div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="trillium_testing" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>